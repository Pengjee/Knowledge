## 怎么理解回流与重绘，在什么场景下会触发

### 概念
#### 回流
布局引擎会根据各种样式计算每个盒子在页面上的大小与位置
#### 重绘
当计算好盒模型的位置、大小及其他属性后，浏览器根据每个盒子特征进行绘制

### 浏览器渲染机制
- 解析html,生成dom树,解析css,生成cssom树
- 将dom树和cssom树结合，生成渲染树
- Layout（回流）：根据生成的渲染树，进行回流，得到节点的几何信息（位置、大小）
- Painting（重绘）：根据渲染树以及回流得到的几何信息，得到节点的绝对像素
- Display：将像素发送给GPU，展示在页面上

### 如何触发回流与重绘？

#### 回流触发时机
回流在上面的渲染机制中解释到，回流主要是为了得到节点的几何信息（位置、大小），那我们可以理解为当节点的位置、大小
等几何信息发生变更时必然是触发了回流的，例如：
- 增删可见DOM元素
- 元素位置变更
- 元素大小发生变更
- 内容发生变更，例如文本变化或图片被另外一个不同尺寸的图片替代
- 页面初始化渲染时
- 浏览器窗口大小变更（因为回流是根据视口大小来计算的元素位置和大小）  

还有一些操作也会导致回流，例如获取特定的属性值：
> offsetTop、offsetLeft、offsetWidth、offsetHeight、scrollTop、scrollLeft
> scrollWidth、scrollHeight、clientTop、clientLeft、clientWidth、clientHeight

此外还有getComputedStyle方法

#### 重绘触发时机
首先我们需要明确一点：回流必定触发重绘。引发重绘一般都是颜色、阴影等绘制属性变更时触发的，例如：
- 颜色的修改
- 文本方向的修改
- 阴影的修改

### 那么如何减少不必要的回流重绘
- 如何想设定元素的样式，通过改变元素的class类名来变更
- 避免设置多项内联样式
- 应用元素的动画，使用`position`属性的`fixed`或者`absolute`
- 避免使用`table`布局，`table`中每个元素的大小以及内容改动，都会导致整个`table`重新计算
- 使用css3硬件加速，可以让`transform`、`opacity`、`filters`这些动画不会引起回流重回
- 避免使用CSS的javascript表达式

